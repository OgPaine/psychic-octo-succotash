let code,timer,timeLeft=10,selectedTime=10;const guessDigitInputs=document.querySelectorAll(".guessDigit"),errorElement=document.getElementById("error"),resultElement=document.getElementById("result"),progressBar=document.getElementById("progress-bar");function generateCode(){let e=new Set;for(;e.size<4;)e.add(Math.floor(10*Math.random()));return Array.from(e)}function setTimeLimit(e){selectedTime=timeLeft=e}function focusNextInput(e){let t=e.nextElementSibling;t&&t.classList.contains("guessDigit")&&t.focus()}function focusPreviousInput(e){let t=e.previousElementSibling;t&&t.classList.contains("guessDigit")&&t.focus()}function checkGuess(e){return e.map((e,t)=>e==code[t]?"Green":code.includes(e)?"Yellow":"Red")}function displayFeedback(e,t){guessDigitInputs.forEach((e,n)=>{e.style.borderBottomColor=t[n]})}function submitGuess(){if(timeLeft<=0)return;let e=Array.from(guessDigitInputs,e=>parseInt(e.value.trim()));if(e.some(isNaN)){errorElement.textContent="Please enter a valid 4-digit number.";return}errorElement.textContent="";let t=checkGuess(e);displayFeedback(e,t),t.every(e=>"Green"===e)&&(clearInterval(timer),resultElement.textContent="Congratulations! You guessed the code!"),guessDigitInputs[guessDigitInputs.length-1].focus()}function restartGame(){clearInterval(timer),errorElement.textContent="",resultElement.textContent="",guessDigitInputs.forEach(e=>{e.value="",e.style.borderBottomColor="white"}),guessDigitInputs[0].focus(),code=generateCode(),timeLeft=selectedTime,progressBar.style.width="100%",countdown()}function countdown(){let e=timeLeft;timer=setInterval(()=>{if(timeLeft<=0)clearInterval(timer),resultElement.textContent="Time's up! The code was: "+code.join("");else{resultElement.textContent="Time left: "+timeLeft+" seconds",timeLeft--;let t=timeLeft/e*100;progressBar.style.width=t+"%"}},1e3)}document.addEventListener("input",function(e){let t=e.target;if(t.classList.contains("guessDigit")){let n=t.value.trim();t.value=n.replace(/\D/g,""),1===n.length&&focusNextInput(t)}}),document.addEventListener("keydown",function(e){let t=e.target;"Backspace"===e.key&&t.classList.contains("guessDigit")&&""===t.value&&focusPreviousInput(t)}),document.addEventListener("keydown",function(e){"Enter"===e.key&&submitGuess()}),document.addEventListener("keydown",function(e){" "===e.key&&restartGame()});